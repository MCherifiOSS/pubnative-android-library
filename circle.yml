machine:
  timezone: Europe/Berlin
  java:
      version: oraclejdk8
# TODO: Uncomment this to enable master/development compile only
#general:
#  branches:
#    only:
#      - master
#      - development
#deployment:
#  development:
#    branch: development
#    commands:
#      - echo TODO-Deploy to QA

test:
  pre:
    # start emulator for instrumentation tests
    - emulator -avd circleci-android22 -no-audio -no-window:
        background: true
        parallel: true

    - circle-android wait-for-boot
    - sleep 60
    - adb shell input keyevent 82
    - adb shell setprop dalvik.vm.dexopt-flags v=n,o=v

  override:
   - ./gradlew connectedCheck

deployment:
  codecov:
    branch: /.*/
    commands:
      - bash <(curl -s https://codecov.io/bash)